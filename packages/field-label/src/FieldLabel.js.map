{"version":3,"file":"FieldLabel.js","sourceRoot":"","sources":["../../../../../src/packages/field-label/src/FieldLabel.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport {\r\n    html,\r\n    SpectrumElement,\r\n    CSSResultArray,\r\n    TemplateResult,\r\n    property,\r\n    PropertyValues,\r\n    SizedMixin,\r\n} from '../../base/src/index';\r\nimport type { Focusable } from '../../shared/src/focusable';\r\nimport '@spectrum-web-components/icons-ui/icons/sp-icon-asterisk100.js';\r\nimport asteriskIconStyles from '@spectrum-web-components/icon/src/spectrum-icon-asterisk.css.js';\r\n\r\nimport styles from './field-label.css.js';\r\n\r\ntype AcceptsFocusVisisble = HTMLElement & { forceFocusVisible?(): void };\r\n\r\n/**\r\n * @element sp-field-label\r\n */\r\nexport class FieldLabel extends SizedMixin(SpectrumElement) {\r\n    public static get styles(): CSSResultArray {\r\n        return [styles, asteriskIconStyles];\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    static instanceCount = 0;\r\n\r\n    @property({ type: Boolean, reflect: true })\r\n    public disabled = false;\r\n\r\n    @property({ type: String })\r\n    public id = '';\r\n\r\n    @property({ type: String })\r\n    public for = '';\r\n\r\n    @property({ type: Boolean, reflect: true })\r\n    public required = false;\r\n\r\n    @property({ type: String, reflect: true, attribute: 'side-aligned' })\r\n    public sideAligned?: 'start' | 'end';\r\n\r\n    private target?: HTMLElement;\r\n\r\n    private handleClick(): void {\r\n        if (!this.target || this.disabled) return;\r\n        this.target.focus();\r\n        const parent = this.getRootNode() as ShadowRoot;\r\n        const target = this.target as AcceptsFocusVisisble;\r\n        const targetParent = target.getRootNode() as ShadowRoot;\r\n        const targetHost = targetParent.host as AcceptsFocusVisisble;\r\n        if (targetParent === parent && target.forceFocusVisible) {\r\n            target.forceFocusVisible();\r\n        } else if (targetHost && targetHost.forceFocusVisible) {\r\n            targetHost.forceFocusVisible();\r\n        }\r\n    }\r\n\r\n    private async manageFor(): Promise<void> {\r\n        if (!this.for) {\r\n            return;\r\n        }\r\n        const parent = this.getRootNode() as HTMLElement;\r\n        const target = parent.querySelector(`#${this.for}`) as Focusable;\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (typeof target.updateComplete !== 'undefined') {\r\n            await target.updateComplete;\r\n        }\r\n        this.target = target.focusElement || target;\r\n        if (this.target) {\r\n            const targetParent = this.target.getRootNode() as HTMLElement;\r\n            if (targetParent === parent) {\r\n                this.target.setAttribute('aria-labelledby', this.id);\r\n            } else {\r\n                this.target.setAttribute(\r\n                    'aria-label',\r\n                    (this.textContent || /* c8 ignore next */ '').trim()\r\n                );\r\n            }\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n\r\n    protected render(): TemplateResult {\r\n        return html`\r\n            <label>\r\n                <slot></slot>\r\n                ${this.required\r\n                    ? html`\r\n                          <sp-icon-asterisk100\r\n                              class=\"requiredIcon spectrum-UIIcon-Asterisk100\"\r\n                          ></sp-icon-asterisk100>\r\n                      `\r\n                    : html``}\r\n            </label>\r\n        `;\r\n    }\r\n\r\n    protected firstUpdated(changes: PropertyValues): void {\r\n        super.firstUpdated(changes);\r\n        if (!this.hasAttribute('id')) {\r\n            this.setAttribute(\r\n                'id',\r\n                `${this.tagName.toLowerCase()}-${FieldLabel.instanceCount++}`\r\n            );\r\n        }\r\n        this.addEventListener('click', this.handleClick);\r\n    }\r\n\r\n    protected updated(changes: PropertyValues): void {\r\n        super.updated(changes);\r\n        if (changes.has('for') || changes.has('id')) {\r\n            this.manageFor();\r\n        }\r\n    }\r\n}\r\n"]}