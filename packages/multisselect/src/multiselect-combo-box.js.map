{"version":3,"file":"multiselect-combo-box.js","sourceRoot":"","sources":["../../../../../src/packages/multisselect/src/multiselect-combo-box.js"],"names":[],"mappings":"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","sourcesContent":["import {PolymerElement} from '@polymer/polymer/polymer-element.js';\r\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\r\nimport {ControlStateMixin} from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\r\nimport {ThemableMixin} from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\r\nimport {ThemePropertyMixin} from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\r\nimport {ComboBoxPlaceholder} from '@vaadin/vaadin-combo-box/src/vaadin-combo-box-placeholder.js';\r\nimport {FlattenedNodesObserver} from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\r\nimport {mixinBehaviors} from '@polymer/polymer/lib/legacy/class.js';\r\nimport {IronResizableBehavior} from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\r\nimport {MultiselectComboBoxMixin} from './multiselect-combo-box-mixin.js';\r\n\r\nimport '@vaadin/vaadin-combo-box/src/vaadin-combo-box-light.js';\r\nimport './multiselect-combo-box-input.js';\r\n\r\n{\r\n  /**\r\n   * `multiselect-combo-box`\r\n   *\r\n   * Multi select combo box based on the vaadin-combo-box\r\n   *\r\n   * @customElement\r\n   * @polymer\r\n   * @demo demo/index.html\r\n   * @appliesMixin MultiselectComboBoxMixin\r\n   */\r\n  class MultiselectComboBox extends\r\n    ControlStateMixin(\r\n      ThemePropertyMixin(\r\n        ThemableMixin(\r\n          MultiselectComboBoxMixin(mixinBehaviors([IronResizableBehavior], PolymerElement))))) {\r\n\r\n    static get template() {\r\n      return html`\r\n        <style>\r\n          :host {\r\n            display: inline-flex;\r\n          }\r\n\r\n          :host([hidden]) {\r\n            display: none !important;\r\n          }\r\n\r\n          :host::before {\r\n            content: \"\\\\2003\";\r\n            width: 0;\r\n            box-sizing: border-box;\r\n            display: inline-flex;\r\n            align-items: center;\r\n          }\r\n\r\n          .multiselect-combo-box-container {\r\n            display: flex;\r\n            flex-direction: column;\r\n            min-width: 100%;\r\n            max-width: 100%;\r\n          }\r\n\r\n          [part=\"label\"]:empty {\r\n            display: none;\r\n          }\r\n\r\n          [part=\"combo-box\"] {\r\n            display: block;\r\n            width: 100%;\r\n            min-width: 0;\r\n          }\r\n\r\n          [part=\"combo-box\"][hidden] {\r\n            display: none;\r\n          }\r\n\r\n          [part=\"input-field\"] {\r\n            width: 100%;\r\n            min-width: 0;\r\n            position: relative;\r\n          }\r\n\r\n          :host([disabled]) [part=\"label\"] {\r\n            pointer-events: none;\r\n          }\r\n\r\n        </style>\r\n\r\n        <div class=\"multiselect-combo-box-container\">\r\n\r\n          <label part=\"label\">[[label]]</label>\r\n\r\n          <div part=\"readonly-container\" hidden\\$=\"[[!readonly]]\">\r\n            [[_getReadonlyValue(selectedItems, itemLabelPath, compactMode, readonlyValueSeparator)]]\r\n          </div>\r\n\r\n          <vaadin-combo-box-light\r\n            id=\"comboBox\"\r\n            part=\"combo-box\"\r\n            hidden\\$=\"[[readonly]]\"\r\n            items=\"[[items]]\"\r\n            item-id-path=\"[[itemIdPath]]\"\r\n            item-label-path=\"[[itemLabelPath]]\"\r\n            item-value-path=\"[[itemValuePath]]\"\r\n            on-change=\"_comboBoxValueChanged\"\r\n            disabled=\"[[disabled]]\"\r\n            page-size=\"[[pageSize]]\"\r\n            filter=\"{{filterValue}}\"\r\n            filtered-items=\"[[filteredItems]]\"\r\n            allow-custom-value=\"[[allowCustomValues]]\"\r\n            on-custom-value-set=\"_handleCustomValueSet\">\r\n\r\n            <multiselect-combo-box-input\r\n              id=\"input\"\r\n              class=\"input\"\r\n              part=\"input-field\"\r\n              placeholder=\"[[placeholder]]\"\r\n              item-label-path=\"[[itemLabelPath]]\"\r\n              items=\"[[selectedItems]]\"\r\n              compact-mode=\"[[compactMode]]\"\r\n              compact-mode-label-generator=\"[[compactModeLabelGenerator]]\"\r\n              on-item-removed=\"_handleItemRemoved\"\r\n              on-remove-all-items=\"_handleRemoveAllItems\"\r\n              has-value=\"[[hasValue]]\"\r\n              has-label=\"[[hasLabel]]\"\r\n              theme\\$=\"[[theme]]\"\r\n              disabled=\"[[disabled]]\"\r\n              clear-button-visible=\"[[clearButtonVisible]]\">\r\n            </multiselect-combo-box-input>\r\n          </vaadin-combo-box-light>\r\n\r\n          <div part=\"error-message\" hidden\\$=\"[[!invalid]]\">[[errorMessage]]</div>\r\n\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    static get is() {\r\n      return 'multiselect-combo-box';\r\n    }\r\n\r\n    constructor() {\r\n      super();\r\n      this._boundCustomOverlaySelectedItemChanged = this._customOverlaySelectedItemChanged.bind(this);\r\n    }\r\n\r\n    ready() {\r\n      super.ready();\r\n\r\n      // replace listener to modify default behavior\r\n      this.$.comboBox.$.overlay.removeEventListener('selection-changed', this.$.comboBox._boundOverlaySelectedItemChanged);\r\n      this.$.comboBox.$.overlay.addEventListener('selection-changed', this._boundCustomOverlaySelectedItemChanged);\r\n\r\n      // modify check to allow custom renderers\r\n      this.$.comboBox.$.overlay._isItemSelected = this._customIsSelected.bind(this);\r\n\r\n      this._observer = new FlattenedNodesObserver(this, (info) => {\r\n        this._setTemplateFromNodes(info.addedNodes);\r\n      });\r\n\r\n      this._notifyReady(); // only relevant when used with Vaadin Flow\r\n    }\r\n\r\n    static get properties() {\r\n      return {\r\n        /**\r\n         * The component label.\r\n         */\r\n        label: {\r\n          type: String,\r\n          value: '',\r\n          observer: '_labelChanged'\r\n        },\r\n\r\n        /**\r\n         * This attribute indicates that the component has a label.\r\n         */\r\n        hasLabel: {\r\n          type: Boolean,\r\n          value: false,\r\n          reflectToAttribute: true\r\n        },\r\n\r\n        /**\r\n         * The title attribute.\r\n         */\r\n        title: {\r\n          type: String,\r\n          value: '',\r\n          reflectToAttribute: true\r\n        },\r\n\r\n        /**\r\n         * The list of selected items.\r\n         *\r\n         * Note: modifying the selected items creates a new array each time.\r\n         */\r\n        selectedItems: {\r\n          type: Array,\r\n          value: () => [],\r\n          notify: true\r\n        },\r\n\r\n        /**\r\n         * This attribute specifies if the list of selected items should be kept ordered in ascending lexical order.\r\n         *\r\n         * If the `itemLabelPath` is specified, that value is used for ordering, otherwise the items themselves are\r\n         * compared using `localCompare`.\r\n         */\r\n        ordered: {\r\n          type: Boolean,\r\n          value: false,\r\n          reflectToAttribute: true\r\n        },\r\n\r\n        /**\r\n         * Number of items fetched at a time from the dataprovider.\r\n         *\r\n         * This property is delegated to the underlying `vaadin-combo-box`.\r\n         */\r\n        pageSize: {\r\n          type: Number,\r\n          value: 50,\r\n          observer: '_pageSizeObserver'\r\n        },\r\n\r\n        /**\r\n         * The `readonly` attribute.\r\n         */\r\n        readonly: {\r\n          type: Boolean,\r\n          value: false,\r\n          reflectToAttribute: true\r\n        },\r\n\r\n        /**\r\n         * The `required` attribute.\r\n         */\r\n        required: {\r\n          type: Boolean,\r\n          value: false,\r\n          reflectToAttribute: true\r\n        },\r\n\r\n        /**\r\n         * The `invalid` attribute.\r\n         */\r\n        invalid: {\r\n          type: Boolean,\r\n          value: false,\r\n          reflectToAttribute: true,\r\n          notify: true\r\n        },\r\n\r\n        /**\r\n         * The `invalid` state error-message.\r\n         */\r\n        errorMessage: String,\r\n\r\n        /**\r\n         * The join separator used for the 'display value' when in read-only mode.\r\n         */\r\n        readonlyValueSeparator: {\r\n          type: String,\r\n          value: ', ' // default value\r\n        },\r\n\r\n        /**\r\n         * If `true`, the user can input a value that is not present in the items list.\r\n         * `value` property will be set to the input value in this case.\r\n         *\r\n         * This property is delegated to the underlying `vaadin-combo-box`.\r\n         */\r\n        allowCustomValues: {\r\n          type: Boolean,\r\n          value: false\r\n        },\r\n\r\n        /**\r\n         * Custom function for rendering the content of every item.\r\n         * Receives three arguments:\r\n         *\r\n         * - `root` The `<vaadin-combo-box-item>` internal container DOM element.\r\n         * - `comboBox` The reference to the `<vaadin-combo-box>` element.\r\n         * - `model` The object with the properties related with the rendered\r\n         *   item, contains:\r\n         *   - `model.index` The index of the rendered item.\r\n         *   - `model.item` The item.\r\n         */\r\n        renderer: Function,\r\n\r\n        _itemTemplate: Object,\r\n\r\n        /**\r\n         * Filtering string the user has typed into the input field.\r\n         */\r\n        filterValue: {\r\n          type: String,\r\n          value: '',\r\n          notify: true\r\n        },\r\n\r\n        /**\r\n         * A subset of items, filtered based on the user input. Filtered items\r\n         * can be assigned directly to omit the internal filtering functionality.\r\n         * The items can be of either `String` or `Object` type.\r\n         */\r\n        filteredItems: Array\r\n      };\r\n    }\r\n\r\n    static get observers() {\r\n      return [\r\n        '_selectedItemsObserver(selectedItems, selectedItems.*)',\r\n        '_templateOrRendererChanged(_itemTemplate, renderer)',\r\n        '_observeOffsetHeight(errorMessage, invalid, label)'\r\n      ];\r\n    }\r\n\r\n    /**\r\n     * Validates the component value.\r\n     *\r\n     * This method will set the components `valid` and `invalid` properties accordingly.\r\n     */\r\n    validate() {\r\n      const valid = this.required ? this.hasValue : true;\r\n      this.invalid = !valid;\r\n      return valid;\r\n    }\r\n\r\n    _selectedItemsObserver(selectedItems) {\r\n      this.hasValue = selectedItems && selectedItems.length > 0;\r\n\r\n      if (this.ordered && !this.compactMode) {\r\n        this._sortSelectedItems(selectedItems);\r\n      }\r\n\r\n      this.compactMode && (this.title = this._getDisplayValue(selectedItems, this.itemLabelPath, ', '));\r\n\r\n      // manually force a render\r\n      this.$.comboBox.$.overlay._selectedItem = {};\r\n\r\n      setTimeout(() => this._notifyResizeIfNeeded(), 0);\r\n    }\r\n\r\n    _templateOrRendererChanged(template, renderer) {\r\n      this.$.comboBox._itemTemplate = template;\r\n      this.$.comboBox.renderer = renderer;\r\n    }\r\n\r\n    _observeOffsetHeight() {\r\n      this._notifyResizeIfNeeded();\r\n    }\r\n\r\n    _dispatchChangeEvent() {\r\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\r\n    }\r\n\r\n    _comboBoxValueChanged(event, selectedItem) {\r\n      const item = selectedItem || this.$.comboBox.selectedItem;\r\n      if (!item) {\r\n        return;\r\n      }\r\n\r\n      const update = this.selectedItems.slice(0);\r\n      const index = this._findIndex(item, this.selectedItems, this.itemIdPath);\r\n      if (index !== -1) {\r\n        update.splice(index, 1);\r\n      } else {\r\n        update.push(item);\r\n      }\r\n\r\n      if (!selectedItem) {\r\n        this.$.comboBox.value = null;\r\n      }\r\n\r\n      this.selectedItems = update;\r\n\r\n      if (this.validate()) {\r\n        this._dispatchChangeEvent();\r\n      }\r\n\r\n      // reset the focus index, so a value-change event\r\n      // is not fired when the overlay is closed\r\n      this.$.comboBox._focusedIndex = -1;\r\n    }\r\n\r\n    _handleCustomValueSet(event) {\r\n      event.preventDefault();\r\n      if (event.detail) {\r\n        this.$.input.value = null; // clear input\r\n        const customValuesSetEvent = new CustomEvent('custom-values-set', {\r\n          detail: event.detail,\r\n          composed: true,\r\n          cancelable: true,\r\n          bubbles: true\r\n        });\r\n        this.dispatchEvent(customValuesSetEvent);\r\n      }\r\n    }\r\n\r\n    _customIsSelected(item, selectedItem, itemIdPath) {\r\n      if (item instanceof ComboBoxPlaceholder) {\r\n        return false;\r\n      }\r\n      return this._isSelected(item, this.selectedItems, itemIdPath);\r\n    }\r\n\r\n    _isSelected(item, selectedItems, itemIdPath) {\r\n      return this._findIndex(item, selectedItems, itemIdPath) !== -1;\r\n    }\r\n\r\n    _findIndex(item, selectedItems, itemIdPath) {\r\n      if (itemIdPath && item) {\r\n        for (let index = 0; index < selectedItems.length; index++) {\r\n          if (selectedItems[index] && selectedItems[index][itemIdPath] === item[itemIdPath]) {\r\n            return index;\r\n          }\r\n        }\r\n        return -1;\r\n      } else {\r\n        return selectedItems.indexOf(item);\r\n      }\r\n    }\r\n\r\n    _handleItemRemoved(event) {\r\n      const item = event.detail.item;\r\n      const update = this.selectedItems.slice(0);\r\n      update.splice(update.indexOf(item), 1);\r\n      this.selectedItems = update;\r\n      if (this.validate()) {\r\n        this._dispatchChangeEvent();\r\n      }\r\n    }\r\n\r\n    _handleRemoveAllItems() {\r\n      this.set('selectedItems', []);\r\n      if (this.validate()) {\r\n        this._dispatchChangeEvent();\r\n      }\r\n    }\r\n\r\n    _getReadonlyValue(selectedItems, itemLabelPath, compactMode, readonlyValueSeparator) {\r\n      return compactMode ?\r\n        this._getCompactModeLabel(selectedItems) :\r\n        this._getDisplayValue(selectedItems, itemLabelPath, readonlyValueSeparator);\r\n    }\r\n\r\n    _getDisplayValue(selectedItems, itemLabelPath, valueSeparator) {\r\n      return selectedItems.map(item => this._getItemLabel(item, itemLabelPath)).join(valueSeparator);\r\n    }\r\n\r\n    get inputElement() {\r\n      return this.$.input;\r\n    }\r\n\r\n    /**\r\n     * Focusable element used by vaadin-control-state-mixin\r\n     */\r\n    get focusElement() {\r\n      return this.inputElement;\r\n    }\r\n\r\n    _labelChanged(label) {\r\n      this.set('hasLabel', label !== '' && label != null);\r\n    }\r\n\r\n    _sortSelectedItems(selectedItems) {\r\n      selectedItems.sort((item1, item2) => {\r\n        const item1Str = String(this._getItemLabel(item1, this.itemLabelPath));\r\n        const item2Str = String(this._getItemLabel(item2, this.itemLabelPath));\r\n        return item1Str.localeCompare(item2Str);\r\n      });\r\n    }\r\n\r\n    _pageSizeObserver(pageSize, oldPageSize) {\r\n      if (Math.floor(pageSize) !== pageSize || pageSize <= 0) {\r\n        this.pageSize = oldPageSize;\r\n        throw new Error('`pageSize` value must be an integer > 0');\r\n      }\r\n      this.$.comboBox.pageSize = pageSize;\r\n    }\r\n\r\n    _customOverlaySelectedItemChanged(event) {\r\n      event.stopPropagation();\r\n\r\n      if (event.detail.item instanceof ComboBoxPlaceholder) {\r\n        return;\r\n      }\r\n\r\n      if (this.$.comboBox.opened) {\r\n        this._comboBoxValueChanged(event, event.detail.item);\r\n\r\n        // When custom values are allowed, we need to clear the input,\r\n        // so we don't fire a custom values event\r\n        if (this.allowCustomValues) {\r\n          this.$.input.value = null;\r\n        }\r\n      }\r\n    }\r\n\r\n    _setTemplateFromNodes(nodes) {\r\n      this._itemTemplate = nodes.filter(node => node.localName && node.localName === 'template')[0] || this._itemTemplate;\r\n    }\r\n\r\n    _notifyReady() {\r\n      this.$server && this.$server.notifyReady();\r\n    }\r\n\r\n\r\n    _notifyResizeIfNeeded() {\r\n      if (this.__previousHeight !== undefined && this.__previousHeight !== this.offsetHeight) {\r\n        this.notifyResize(); // allows the items drop-down to reposition itself if needed\r\n        this.dispatchEvent(new CustomEvent('iron-resize', {bubbles: true})); // allows i.e. vaadin-grid to resize itself\r\n      }\r\n      this.__previousHeight = this.offsetHeight;\r\n    }\r\n  }\r\n\r\n  customElements.define(MultiselectComboBox.is, MultiselectComboBox);\r\n}\r\n"]}